<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayan's Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 2rem;
            position: relative;
        }
        .profile-pic {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin: 1rem auto;
            display: block;
        }
        header h1 {
            margin-bottom: 1.5rem;
        }
        nav {
            display: flex;
            justify-content: center;
            flex-wrap: nowrap;
        }
        nav a {
            color: white;
            margin: 0 1rem;
            text-decoration: none;
            font-size: 1.1rem;
            white-space: nowrap;
        }
        nav a:hover {
            text-decoration: underline;
        }
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #333;
            text-align: center;
        }
        #about {
            padding: 2rem 0;
            text-align: center;
        }
        #about p {
            max-width: 800px;
            margin: 0 auto;
            color: #555;
            line-height: 1.6;
        }
        #skills {
            padding: 2rem 0;
            text-align: center;
        }
        #skills h2 {
            margin-bottom: 1.5rem;
            text-align: center;
        }
        #skills ul {
            list-style-type: disc;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
            padding: 0;
            font-size: 1.1rem;
            color: #333;
        }
        #skills ul li {
            margin: 0.5rem 1.2rem;
            text-align: center;
        }
        #contact {
            text-align: center;
            padding: 2rem 0;
        }
        #contact p {
            margin: 0.5rem 0;
            color: #555;
        }
        #contact a {
            color: #007bff;
            text-decoration: none;
            cursor: pointer;
        }
        #contact a:hover {
            text-decoration: underline;
        }
        .chat-bubble {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #007bff;
            color: white;
            padding: 1rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .chat-bubble img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
        }
        .chat-overlay {
            display: none;
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 300px;
            height: 400px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            flex-direction: column;
        }
        .chat-header {
            background: #007bff;
            color: white;
            padding: 0.5rem;
            border-radius: 10px 10px 0 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .chat-header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        .chat-body {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: #f9f9f9;
        }
        .chat-message {
            margin: 0.5rem 0;
            padding: 0.5rem;
            border-radius: 5px;
        }
        .user-message {
            background: #007bff;
            color: white;
            margin-left: 20%;
            margin-right: 1rem;
        }
        .ai-message {
            background: #e0e0e0;
            margin-right: 20%;
            margin-left: 1rem;
        }
        .chat-input {
            display: flex;
            padding: 0.5rem;
            background: #fff;
            border-top: 1px solid #ddd;
        }
        .chat-input input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-right: 0.5rem;
        }
        .chat-input button {
            padding: 0.5rem 1rem;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .dark {
            background-color: #222;
            color: #ddd;
        }
        .dark header {
            background-color: #1a1a1a;
        }
        .dark h2 {
            color: #ddd;
        }
        .dark #skills ul {
            color: #ddd;
        }
        .dark #about p {
            color: #bbb;
        }
        .dark #contact p {
            color: #bbb;
        }
        .dark #contact a {
            color: #4da8ff;
        }
        .dark .chat-bubble {
            background-color: #005bb5;
        }
        .dark .chat-overlay {
            background: #333;
        }
        .dark .chat-header {
            background: #005bb5;
        }
        .dark .chat-body {
            background: #2a2a2a;
        }
        .dark .ai-message {
            background: #444;
            color: #ddd;
        }
        .dark .chat-input {
            background: #333;
            border-top: 1px solid #555;
        }
        .dark .chat-input input {
            background: #444;
            color: #ddd;
            border: 1px solid #555;
        }
        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            outline: none;
        }
        @media (max-width: 600px) {
            .chat-overlay {
                width: 90%;
                height: 80%;
                bottom: 10px;
                right: 5%;
            }
            h2 {
                font-size: 1.2rem;
                margin-bottom: 0.8rem;
                text-align: center;
            }
            #skills h2 {
                margin-bottom: 1rem;
                text-align: center;
            }
            #skills ul {
                padding: 0;
                justify-content: center;
                align-items: center;
            }
            #skills ul li {
                margin: 0.5rem 0.6rem;
                font-size: 1rem;
                text-align: center;
            }
            nav {
                flex-wrap: nowrap;
                justify-content: center;
            }
            nav a {
                margin: 0 0.5rem;
                font-size: 0.9rem;
            }
        }
        .loading {
            display: none;
            text-align: center;
            padding: 0.5rem;
            color: #555;
        }
        .dark .loading {
            color: #bbb;
        }
        .typing-indicator {
            margin: 0.5rem 0;
            padding: 0.5rem;
            margin-right: 20%;
            margin-left: 1rem;
        }
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #555;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1s infinite;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        @keyframes typing {
            0%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            50% {
                transform: translateY(-5px);
                opacity: 1;
            }
        }
        .dark .typing-indicator span {
            background-color: #bbb;
        }
    </style>
</head>
<body>
    <header id="home">
        <img src="https://i.ibb.co/hFqs7p9M/Ayan-image.jpg" alt="Ayan's Profile Picture" class="profile-pic">
        <h1>Hi, I'm Ayan Dey</h1>
        <button class="theme-toggle" id="themeToggle">🌙</button>
        <nav>
            <a href="#home">Home</a>
            <a href="#about">About</a>
            <a href="#skills">Skills</a>
            <a href="#contact">Contact</a>
        </nav>
    </header>
    <div class="container">
        <section id="about">
            <h2>About Me</h2>
            <p>I'm Ayan Dey, a B.Tech CSE student specialized in AIML and an aspiring software developer with a knack for creating modern, responsive, and user-friendly applications. With expertise in HTML, CSS, and JavaScript, I enjoy building projects that combine functionality with aesthetic design. I'm open to paid remote internships, being skilled in Python, ML, and SQL. My goal is to craft digital experiences that make an impact.</p>
        </section>
        <section id="skills">
            <h2>Skills</h2>
            <ul>
                <li>Python</li>
                <li>HTML</li>
                <li>CSS</li>
                <li>JavaScript</li>
                <li>Machine Learning</li>
                <li>SQL</li>
                <li>Artificial Intelligence</li>
            </ul>
        </section>
        <section id="contact">
            <h2>Contact</h2>
            <p>Email: ayandey2285@gmail.com</p>
            <p>LinkedIn: <a href="https://www.linkedin.com/in/ayandey212105242" target="_blank" rel="noopener noreferrer" onclick="window.open('https://www.linkedin.com/in/ayandey212105242', '_blank'); return false;">View Profile</a></p>
        </section>
    </div>
    <div class="chat-bubble" id="chatBubble">
        <img src="https://picsum.photos/30/30?random=5" alt="Chat Profile Picture">
        <span>Ask anything about Ayan</span>
    </div>
    <div class="chat-overlay" id="chatOverlay">
        <div class="chat-header">
            <img src="https://picsum.photos/40/40?random=5" alt="Chat Profile Picture">
            <span>Ayan's Assistant</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="ai-message" id="initialMessage"></div>
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Type your question...">
            <button onclick="sendMessage()">Send</button>
        </div>
        <div class="loading" id="loadingIndicator">Loading...</div>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
        apiKey: "AIzaSyBrxe7_YxG5Jy9GQ8jQcXkmosCe1rgcAdg",
        authDomain: "modern-portfolio-a70fd.firebaseapp.com",
        projectId: "modern-portfolio-a70fd",
        storageBucket: "modern-portfolio-a70fd.firebasestorage.app",
        messagingSenderId: "503403672259",
        appId: "1:503403672259:web:2b524f261f7f8541e6a876",
        measurementId: "G-FSFL50ZPVR"
        };
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
    </script>
    <script>
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const section = document.querySelector(this.getAttribute('href'));
                section.scrollIntoView({ behavior: 'smooth' });
            });
        });
        const chatBubble = document.getElementById('chatBubble');
        const chatOverlay = document.getElementById('chatOverlay');
        const chatBody = document.getElementById('chatBody');
        const chatInput = document.getElementById('chatInput');
        const initialMessage = document.getElementById('initialMessage');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const myFullname = "Ayan Dey";
        const myDescription = "I'm a second-year B.Tech student of University of Engineering and Management,Kolkata specializing in Computer Science and Artificial Intelligence/Machine Learning.I'm passionate about building smart, scalable software solutions and applying ML techniques to real-world problems.I've been learning technologies like Python,SQL and basic ML frameworks (like Scikit-learn, TensorFlow),and I enjoy working on hands-on projects that help me sharpen my problem-solving skills.Currently looking for paid remote internships where I can contribute meaningfully while growing under experienced mentors in a professional setting. Let's connect!I'm always open to opportunities and collaborations in AI,software development or research.";
        const apiKey = "AIzaSyCptGF6YjI3WuZ5nDvDeRDtD8wP327s0Go"; // Replace with your Gemini API key from https://aistudio.google.com/app/apikey (e.g., AIzaSyDuDY-jheQlTUqvuCL25uiWf4NbSRqJfOI)
        // Log API key status on page load
        console.log('API Key Status:', apiKey === "YOUR_GEMINI_API_KEY" ? "Missing API key! Set a valid key." : "API key set.");
        chatBubble.addEventListener('click', () => {
            const isOpen = chatOverlay.style.display === 'flex';
            chatOverlay.style.display = isOpen ? 'none' : 'flex';
            if (!isOpen) {
                initialMessage.textContent = `Hi, I'm ${myFullname}, what do you want to know about me?`;
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        });
        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message || message.length > 200) {
                if (message.length > 200) {
                    alert('Message is too long! Keep it under 200 characters.');
                }
                return;
            }
            const userMsg = document.createElement('div');
            userMsg.className = 'chat-message user-message';
            userMsg.textContent = message;
            chatBody.appendChild(userMsg);
            chatInput.value = '';
            chatInput.placeholder = 'Type your question...';
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator';
            typingIndicator.innerHTML = '<span></span><span></span><span></span>';
            chatBody.appendChild(typingIndicator);
            loadingIndicator.style.display = 'none';
            chatBody.scrollTop = chatBody.scrollHeight;
            try {
                if (!apiKey || apiKey === "YOUR_GEMINI_API_KEY") {
                    throw new Error("Gemini API key is missing. Get one at https://aistudio.google.com/app/apikey.");
                }
                console.log('Sending Gemini API request for message:', message);
                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=' + apiKey, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `User message: ${message}. Reply naturally as if you are Ayan Dey talking, using short sentences. If relevant, base your answer on this description: ${myDescription}. Otherwise, give a friendly response.`
                            }]
                        }],
                        generationConfig: { temperature: 0.7, maxOutputTokens: 100 }
                    })
                });
                console.log('Gemini API response status:', response.status);
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Gemini API request failed! Status: ${response.status}, Details: ${errorText}`);
                }
                const data = await response.json();
                console.log('Gemini API response data:', data);
                if (!data.candidates || !data.candidates[0] || !data.candidates[0].content || !data.candidates[0].content.parts) {
                    throw new Error('Invalid Gemini API response structure.');
                }
                const aiResponse = data.candidates[0].content.parts[0].text;
                const aiMsg = document.createElement('div');
                aiMsg.className = 'chat-message ai-message';
                aiMsg.textContent = aiResponse;
                chatBody.appendChild(aiMsg);
            } catch (error) {
                console.error('Chatbot error:', error.message, error.stack);
                const aiMsg = document.createElement('div');
                aiMsg.className = 'chat-message ai-message';
                aiMsg.textContent = `Chatbot error: ${error.message}. Check API key at https://aistudio.google.com/app/apikey or try again.`;
                chatBody.appendChild(aiMsg);
            }
            chatBody.removeChild(typingIndicator);
            chatBody.scrollTop = chatBody.scrollHeight;
        }
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark');
            themeToggle.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';
        });
    </script>
</body>
</html>